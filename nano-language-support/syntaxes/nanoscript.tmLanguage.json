{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "NanoScript",
    "scopeName": "source.nano",
    "patterns": [
        { "include": "#comments"    },
        { "include": "#keywords"    },
        { "include": "#numbers"     },
        { "include": "#operators"   },
        { "include": "#punctuation" },
        { "include": "#identifiers" }
    ],
    "repository": {
        "comments": {
            "name":  "comment.line.double-slash.nano",
            "match": "//.*$"
        },
        "keywords": {
            "patterns": [
                {
                    "name":  "keyword.control.nano",
                    "match": "\\b(if)\\b"
                },
                {
                    "name":  "keyword.other.nano",
                    "match": "\\b(out)\\b"
                }
            ]
        },
        "numbers": {
            "name":  "constant.numeric.integer.nano",
            "match": "\\b[0-9]+\\b"
        },
        "operators": {
            "patterns": [
                {
                    "comment": "Comparison operators — must come before '=' so '==' is matched first",
                    "name":  "keyword.operator.comparison.nano",
                    "match": "==|!=|<=|>=|<|>"
                },
                {
                    "comment": "Assignment — negative lookahead prevents matching inside '=='",
                    "name":  "keyword.operator.assignment.nano",
                    "match": "(?<![=!<>])=(?!=)"
                },
                {
                    "name":  "keyword.operator.arithmetic.nano",
                    "match": "[+\\-*/]"
                }
            ]
        },
        "punctuation": {
            "patterns": [
                {
                    "name":  "punctuation.terminator.statement.nano",
                    "match": ";"
                },
                {
                    "name":  "punctuation.section.block.nano",
                    "match": "[{}]"
                },
                {
                    "name":  "punctuation.section.parens.nano",
                    "match": "[()]"
                }
            ]
        },
        "identifiers": {
            "name":  "variable.other.nano",
            "match": "\\b[a-zA-Z_][a-zA-Z0-9_]*\\b"
        }
    }
}
